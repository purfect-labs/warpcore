<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>WARPCORE Analytics Dashboard - Enhanced Workflows</title>
    <link rel="stylesheet" href="css/dashboard.css">
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <script src="https://d3js.org/d3.v7.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.2/gsap.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/three.js/r128/three.min.js"></script>
</head>
<body>
    <div class="dashboard-container">
        <header class="dashboard-header">
            <div class="header-content">
                <h1 class="dashboard-title">WARPCORE Analytics</h1>
                <div class="workflow-status">
                    <span class="status-indicator" id="workflowStatus"></span>
                    <span class="status-text" id="statusText">Loading...</span>
                </div>
                <div class="last-updated">
                    <span id="lastUpdated">--:--</span>
                </div>
            </div>
        </header>

        <!-- Tab Navigation will be created by JavaScript -->
        <div id="dashboard-content"></div>
    </div>

    <script src="js/analytics-engine.js"></script>
    <script src="js/real-data-dashboard.js"></script>
    
    <!-- Working Dashboard Implementation -->
    <script>
        async function loadWorkflowDashboard() {
            const content = document.getElementById('dashboard-content');
            
            try {
                const response = await fetch('/api/workflow-files');
                const data = await response.json();
                
                content.innerHTML = `
                    <div style="padding: 2rem;">
                        <h2>üìä WARPCORE Workflow Files Dashboard</h2>
                        <p>üìÅ Found ${data.total_workflows} workflows with ${data.total_files} cache files</p>
                        
                        ${data.workflow_files.map(wf => `
                            <div style="background: rgba(255,255,255,0.05); margin: 1rem 0; padding: 1.5rem; border-radius: 10px; border-left: 4px solid #00d4ff;">
                                <h3>üîÑ Workflow: ${wf.workflow_id}</h3>
                                <p>üìä ${wf.total_files} files ‚Ä¢ ${(wf.total_size/1024).toFixed(1)}KB ‚Ä¢ ${wf.agents.length} agents</p>
                                <div style="margin: 1rem 0;">
                                    <strong>ü§ñ Agents:</strong> ${wf.agents.join(', ')}
                                </div>
                                
                                ${wf.files.map(file => `
                                    <div style="background: rgba(0,0,0,0.2); margin: 0.5rem 0; padding: 1rem; border-radius: 8px;">
                                        <div style="display: flex; justify-content: space-between; align-items: center;">
                                            <div>
                                                <strong>${file.agent_type}</strong> - ${file.file_type}
                                                <br><small style="color: #aaa;">${file.filename}</small>
                                            </div>
                                            <div style="text-align: right; font-size: 0.9rem;">
                                                ${file.mission_status === 'COMPLETED SUCCESSFULLY' ? '‚úÖ COMPLETE' : 'üîÑ RUNNING'}<br>
                                                ${file.next_agent ? `‚û°Ô∏è Next: ${file.next_agent}` : ''}
                                                <br><span style="color: #00d4ff;">${(file.size/1024).toFixed(1)}KB</span>
                                            </div>
                                        </div>
                                        ${file.summary && Object.keys(file.summary).length > 0 ? `
                                            <div style="margin-top: 0.5rem; padding: 0.5rem; background: rgba(0,212,255,0.1); border-radius: 4px; font-size: 0.85rem;">
                                                ${Object.entries(file.summary).map(([key, value]) => `<span style="margin-right: 1rem;">${key}: ${value}</span>`).join('')}
                                            </div>
                                        ` : ''}
                                    </div>
                                `).join('')}
                            </div>
                        `).join('')}
                        
                        <div style="margin-top: 2rem; padding: 1rem; background: rgba(57,255,20,0.1); border-radius: 8px; text-align: center;">
                            ‚ú® Enhanced Workflow Files Browser - WARP REAL CACHE DATA
                        </div>
                    </div>
                `;
                
            } catch (error) {
                content.innerHTML = `
                    <div style="padding: 2rem; text-align: center; color: #ff6b6b;">
                        <h2>‚ùå Error Loading Dashboard</h2>
                        <p>${error.message}</p>
                        <button onclick="loadWorkflowDashboard()" style="padding: 0.5rem 1rem; background: #00d4ff; border: none; border-radius: 5px; cursor: pointer;">Retry</button>
                    </div>
                `;
            }
        }
        
        document.addEventListener('DOMContentLoaded', loadWorkflowDashboard);
    </script>
    
    <!-- WARP FAKE SUB TEST DEMO WATERMARK -->
    <div style="position: fixed; bottom: 10px; right: 10px; background: rgba(0,212,255,0.1); color: #00d4ff; padding: 5px 10px; border-radius: 5px; font-size: 12px; z-index: 1000;">WARP DEMO DATA</div>
</body>
</html>