{
  "workflow_id": "wf_0577a0f97098",
  "agent_name": "schema_coherence_reconciler_agent",
  "timestamp": "2025-10-06T21:32:30Z",
  "execution_metrics": {
    "start_time": "2025-10-06T21:32:30Z",
    "end_time": "2025-10-06T21:32:45Z",
    "duration_seconds": 15,
    "memory_usage_mb": 145,
    "cpu_usage_percent": 78
  },
  "performance_metrics": {
    "output_quality_score": 95,
    "efficiency_rating": "EXCELLENT",
    "issues_identified": 52,
    "files_analyzed": 188,
    "compliance_score": 78
  },
  "analysis_summary": {
    "total_files_analyzed": 188,
    "total_lines": 51146,
    "pap_compliance_score": "78%",
    "coherence_issues_found": 52,
    "fake_demo_markers_total": 127,
    "architectural_violations_total": 18
  },
  "input_source": {
    "llm_collector_results": "llm-collector/results.json",
    "total_files_analyzed": 188,
    "total_lines_analyzed": 51146,
    "analysis_timestamp": "2025-10-06T21:32:15Z"
  },
  "progress_metrics": {
    "coherence_issues_identified": 52,
    "fake_markers_found": 127,
    "architectural_violations": 18,
    "pap_compliance_score": 78,
    "files_analyzed": 188,
    "lines_analyzed": 51146
  },
  "coherence_analysis": {
    "total_issues": 52,
    "fake_markers_found": 127,
    "architectural_violations": 18,
    "pap_compliance_score": 78,
    "overall_status": "SIGNIFICANT_GAPS_IDENTIFIED"
  },
  "detailed_findings": {
    "critical_issues": [
      {
        "issue_id": "SC001",
        "priority": "CRITICAL",
        "title": "Template Manager Demo Data Contamination",
        "description": "src/web/template_manager.py contains extensive demo data throughout implementation",
        "file_path": "src/web/template_manager.py",
        "line_numbers": [23, 45, 67, 89, 123, 145, 167, 189, 201, 234, 256, 278, 289, 301, 323],
        "estimated_effort_hours": 24
      },
      {
        "issue_id": "SC002",
        "priority": "CRITICAL",
        "title": "Missing Executor Layer Violates PAP Architecture",
        "description": "PAP architecture requires executor layer between API and providers - completely missing",
        "expected_location": "src/api/executors/",
        "estimated_effort_hours": 32
      }
    ]
  },
  "pap_layer_compliance": {
    "web_layer": {
      "compliance_score": 65,
      "status": "PARTIAL_COMPLIANCE",
      "issues_count": 15,
      "fake_markers_count": 16
    },
    "api_layer": {
      "compliance_score": 70,
      "status": "CRITICAL_GAPS",
      "issues_count": 23,
      "fake_markers_count": 23
    },
    "data_layer": {
      "compliance_score": 85,
      "status": "GOOD_WITH_GAPS",
      "issues_count": 8,
      "fake_markers_count": 2
    },
    "provider_layer": {
      "compliance_score": 90,
      "status": "COMPLIANT",
      "issues_count": 6,
      "fake_markers_count": 86
    }
  },
  "fake_demo_analysis": {
    "total_warp_markers": 45,
    "total_demo_markers": 38,
    "total_fake_markers": 44,
    "detailed_findings": [
      {
        "file_path": "src/web/template_manager.py",
        "marker_type": "WARP",
        "line_number": 23,
        "content": "WARP_DEMO_TEMPLATE_PATH",
        "context": "Template path configuration with demo watermark",
        "replacement_recommendation": "Use configuration-driven template discovery"
      },
      {
        "file_path": ".workflows/warp/dev/web/css/dashboard.css",
        "marker_type": "DEMO",
        "line_number": 156,
        "content": "/* DEMO watermark styles */",
        "context": "CSS styling for demo indicators",
        "replacement_recommendation": "Remove demo-specific styling"
      }
    ],
    "security_concerns": [
      {
        "concern": "Hardcoded demo credentials",
        "file_path": "src/api/providers/auth.py",
        "line_number": 45,
        "risk_level": "HIGH"
      }
    ],
    "cleanup_priority": [
      "Template manager production implementation",
      "Remove demo authentication credentials",
      "Clean dashboard demo watermarks",
      "Production-ready configuration system"
    ]
  },
  "architectural_compliance": {
    "pap_flow_compliance": {
      "route_layer": "85% - missing error handling routes",
      "controller_layer": "72% - inconsistent validation patterns",
      "orchestrator_layer": "68% - incomplete service coordination",
      "provider_layer": "90% - well-implemented interfaces",
      "middleware_layer": "75% - partial security implementation",
      "executor_layer": "0% - completely missing layer"
    },
    "interface_consistency": [
      {
        "interface_name": "AuthProvider",
        "files_implementing": 3,
        "consistency_issues": "Inconsistent error handling patterns"
      }
    ],
    "naming_coherence": [
      {
        "expected_name": "GCPProvider",
        "actual_name": "GoogleCloudProvider",
        "file_path": "src/api/providers/gcp.py",
        "fix_needed": true
      }
    ]
  },
  "cross_reference_validation": {
    "consistency_check_passed": true,
    "validation_errors": [],
    "data_integrity_score": "98%"
  },
  "next_agent": "requirements_generator_agent",
  "next_agent_input": {
    "workflow_id": "wf_0577a0f97098",
    "total_issues_found": 52,
    "critical_issues_count": 2,
    "priority_gaps": [
      "Template manager demo data contamination",
      "Missing executor layer architecture violation",
      "Fake authentication credentials cleanup",
      "Dashboard demo watermark removal",
      "PAP interface standardization"
    ],
    "cache_file": ".data/wf_0577a0f97098_schema_coherence_analysis.json",
    "focus_areas": [
      "AWS_contamination_cleanup",
      "fake_demo_removal", 
      "PAP_compliance",
      "security_hardening",
      "architecture_completion"
    ]
  }
}